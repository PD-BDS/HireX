[
  {
    "initial_output": {
      "query_controls": {
        "phase_sequence": [
          "job_description"
        ],
        "last_completed_phase": "",
        "jd_complete": false,
        "allow_jd_incomplete": false,
        "update_jd": false,
        "screen_again": false,
        "new_job_search": false,
        "candidates_ready": false
      },
      "cleaned_user_query": "Hi, I'm hiring a Senior Electrical & Automation Engineer in Denmark and need to find candidates.",
      "reasoning": "The recruiter is beginning a search, so job_description should run first."
    },
    "human_feedback": "Include update_jd=true whenever you queue job_description so the new brief is persisted.",
    "improved_output": {
      "query_controls": {
        "phase_sequence": [
          "job_description"
        ],
        "last_completed_phase": "",
        "jd_complete": false,
        "allow_jd_incomplete": false,
        "update_jd": true,
        "screen_again": false,
        "new_job_search": false,
        "candidates_ready": false
      },
      "cleaned_user_query": "Hi, I'm hiring a Senior Electrical & Automation Engineer in Denmark and need to find candidates.",
      "reasoning": "We start with job_description and mark update_jd=true to capture the automation role details."
    },
    "name": "Initial request for finding candidates",
    "inputs": {
      "user_query": "Hi, I'm hiring a Senior Electrical & Automation Engineer in Denmark and need to find candidates.",
      "last_phase": "",
      "previous_plan": "",
      "query_control": {
        "phase_sequence": [],
        "jd_complete": false,
        "allow_jd_incomplete": false,
        "update_jd": false,
        "screen_again": false,
        "new_job_search": false,
        "candidates_ready": false
      },
      "state": {
        "job_description": null,
        "candidate_insights": [],
        "last_completed_phase": null,
        "pending_phases": [],
        "query_controls": {
          "phase_sequence": [],
          "last_completed_phase": null,
          "jd_complete": false,
          "allow_jd_incomplete": false,
          "update_jd": false,
          "screen_again": false,
          "new_job_search": false,
          "candidates_ready": false
        }
      },
      "conversation_history": [
        {
          "role": "user",
          "phase": null,
          "timestamp": null,
          "content": "Hi, I'm hiring a Senior Electrical & Automation Engineer in Denmark and need to find candidates."
        }
      ]
    }
  },
  {
    "initial_output": {
      "query_controls": {
        "phase_sequence": [],
        "last_completed_phase": "job_description",
        "jd_complete": false,
        "allow_jd_incomplete": false,
        "update_jd": false
      },
      "cleaned_user_query": "Please update the job to highlight 10 years of experience.",
      "reasoning": "Since the recruiter already shared the brief, no further action is required."
    },
    "human_feedback": "The recruiter is still providing JD content. Keep job_description in phase_sequence and retain update_jd=true until they ask to move on.",
    "improved_output": {
      "query_controls": {
        "phase_sequence": [
          "job_description"
        ],
        "last_completed_phase": "job_description",
        "jd_complete": false,
        "allow_jd_incomplete": false,
        "update_jd": true
      },
      "cleaned_user_query": "Please update the job to highlight 10 years of experience.",
      "reasoning": "Stay on job_description with update_jd=true so the new responsibilities are recorded."
    },
    "name": "JD tweak while snapshot incomplete",
    "inputs": {
      "user_query": "Please update the job to highlight 10 years of experience.",
      "last_phase": "job_description",
      "previous_plan": "job_description",
      "query_control": {
        "phase_sequence": [
          "job_description"
        ],
        "last_completed_phase": "job_description",
        "jd_complete": false,
        "allow_jd_incomplete": false,
        "update_jd": true,
        "screen_again": false,
        "new_job_search": false,
        "candidates_ready": false
      },
      "state": {
        "job_description": null,
        "candidate_insights": [],
        "last_completed_phase": "job_description",
        "pending_phases": [
          "job_description"
        ],
        "query_controls": {
          "phase_sequence": [
            "job_description"
          ],
          "last_completed_phase": "job_description",
          "jd_complete": false,
          "allow_jd_incomplete": false,
          "update_jd": true,
          "screen_again": false,
          "new_job_search": false,
          "candidates_ready": false
        }
      },
      "conversation_history": [
        {
          "role": "user",
          "phase": "job_description",
          "timestamp": "2025-11-14T14:16:49Z",
          "content": "Hi, I'm hiring a Senior Electrical & Automation Engineer in Denmark with Siemens stack, and 15 years of experience and need to find candidates."
        },
        {
          "role": "assistant",
          "phase": "job_description",
          "timestamp": "2025-11-14T14:18:43Z",
          "content": "Great! I'm excited to assist you in finding candidates for this important role. Captured the title of the job, location, skills, and experience. I would recommend reviewing the job snapshot and add recommended details of the job for better screening."
        },
        {
          "role": "user",
          "phase": "job_description",
          "timestamp": null,
          "content": "Please update the job to highlight 10 years of experience."
        }
      ]
    }
  },
  {
    "initial_output": {
      "query_controls": {
        "phase_sequence": [
          "job_description",
          "screening"
        ],
        "last_completed_phase": "job_description",
        "jd_complete": false,
        "allow_jd_incomplete": false,
        "update_jd": true
      },
      "cleaned_user_query": "yes, start screening.",
      "reasoning": "Queue job_description first to ensure the snapshot is precise, then run screening."
    },
    "human_feedback": "When the recruiter explicitly requests screening after approving the brief, go straight to phase_sequence [\"screening\"] and allow the incomplete JD so execution continues.",
    "improved_output": {
      "query_controls": {
        "phase_sequence": [
          "screening"
        ],
        "last_completed_phase": "job_description",
        "jd_complete": false,
        "allow_jd_incomplete": true
      },
      "cleaned_user_query": "yes, start screening.",
      "reasoning": "The recruiter said \"screen candidates\" so we route directly to screening and let the crew proceed even though the JD has open questions."
    },
    "name": "Approve screening despite incomplete JD",
    "inputs": {
      "user_query": "yes, start screening.",
      "last_phase": "job_description",
      "previous_plan": "job_description",
      "query_control": {
        "phase_sequence": [
          "job_description"
        ],
        "last_completed_phase": "job_description",
        "jd_complete": false,
        "allow_jd_incomplete": false,
        "update_jd": true,
        "screen_again": false,
        "new_job_search": false,
        "candidates_ready": false
      },
      "state": {
        "job_description": null,
        "candidate_insights": [],
        "last_completed_phase": "job_description",
        "pending_phases": [
          "job_description"
        ],
        "query_controls": {
          "phase_sequence": [
            "job_description"
          ],
          "last_completed_phase": "job_description",
          "jd_complete": false,
          "allow_jd_incomplete": false,
          "update_jd": true,
          "screen_again": false,
          "new_job_search": false,
          "candidates_ready": false
        }
      },
      "conversation_history": [
        {
          "role": "user",
          "phase": "job_description",
          "timestamp": "2025-11-14T14:16:49Z",
          "content": "Here are the basics for the automation engineer in Denmark: Siemens PCS 7, SCADA, PLC, and 10 years experience."
        },
        {
          "role": "assistant",
          "phase": "job_description",
          "timestamp": "2025-11-14T14:18:43Z",
          "content": "Captured the automation JD with Denmark location, Siemens stack, and 10 years experience. I would recommend reviewing the job snapshot and add recommended details of the job for better screening. or Ready to move to screening now if you want."
        },
        {
          "role": "user",
          "phase": "job_description",
          "timestamp": null,
          "content": "yes, start screening."
        }
      ]
    }
  },
  {
    "initial_output": {
      "query_controls": {
        "phase_sequence": [
          "job_description",
          "screening"
        ],
        "last_completed_phase": "screening",
        "jd_complete": false,
        "allow_jd_incomplete": true,
        "update_jd": true,
        "candidates_ready": true
      },
      "cleaned_user_query": "Let's discuss the shortlisted candidates and explain why do you think they are the right fit for the role.",
      "reasoning": "Revisit the job description to check the candidate profile, then re-run screening for clarity."
    },
    "human_feedback": "The recruiter wants insights on Romashchenko, not a new JD. Respond with phase_sequence [\"discussion\"] and keep candidates_ready true.",
    "improved_output": {
      "query_controls": {
        "phase_sequence": [
          "discussion"
        ],
        "last_completed_phase": "screening",
        "jd_complete": false,
        "allow_jd_incomplete": true,
        "candidates_ready": true
      },
      "cleaned_user_query": "Let's discuss the shortlisted candidates and explain why do you think they are the right fit for the role.",
      "reasoning": "The recruiter is asking for candidate insight, so we remain in discussion and reference the existing shortlist."
    },
    "name": "Move into discussion after screening",
    "inputs": {
      "user_query": "Let's discuss the shortlisted candidates and explain why do you think they are the right fit for the role.",
      "last_phase": "screening",
      "previous_plan": "",
      "query_control": {
        "phase_sequence": [
          "screening"
        ],
        "last_completed_phase": "screening",
        "jd_complete": true,
        "allow_jd_incomplete": true,
        "update_jd": false,
        "screen_again": false,
        "new_job_search": false,
        "candidates_ready": true
      },
      "state": {
        "job_description": null,
        "candidate_insights": [],
        "last_completed_phase": "screening",
        "pending_phases": [
          "screening"
        ],
        "query_controls": {
          "phase_sequence": [
            "screening"
          ],
          "last_completed_phase": "screening",
          "jd_complete": true,
          "allow_jd_incomplete": true,
          "update_jd": false,
          "screen_again": false,
          "new_job_search": false,
          "candidates_ready": true
        }
      },
      "conversation_history": [
        {
          "role": "user",
          "phase": "job_description",
          "timestamp": "2025-11-14T14:28:01Z",
          "content": "screen candidates for this role."
        },
        {
          "role": "assistant",
          "phase": "screening",
          "timestamp": "2025-11-14T14:32:16Z",
          "content": "Shortlisted Romashchenko (0.88), Abhiram (0.73), and Prasad (0.64). Romashchenko leads with Siemens PCS 7 experience."
        },
        {
          "role": "user",
          "phase": "screening",
          "timestamp": null,
          "content": "Let's discuss the shortlisted candidates and explain why do you think they are the right fit for the role."
        }
      ]
    }
  },
  {
    "initial_output": {
      "query_controls": {
        "phase_sequence": [
          "job_description",
          "screening"
        ],
        "last_completed_phase": "discussion",
        "jd_complete": false,
        "allow_jd_incomplete": true,
        "update_jd": true,
        "screen_again": true,
        "candidates_ready": true
      },
      "cleaned_user_query": "Let's discuss the shortlisted candidates and explain why do you think they are the right fit for the role.",
      "reasoning": "Before answering project questions, fine-tune the JD and re-run screening to verify alignment."
    },
    "human_feedback": "Follow-up questions about a shortlisted candidate stay in discussion. Keep allow_jd_incomplete/candidates_ready true and drop job_description unless the recruiter requests changes.",
    "improved_output": {
      "query_controls": {
        "phase_sequence": [
          "discussion"
        ],
        "last_completed_phase": "discussion",
        "jd_complete": false,
        "allow_jd_incomplete": true,
        "candidates_ready": true
      },
      "cleaned_user_query": "Let's discuss the shortlisted candidates and explain why do you think they are the right fit for the role.",
      "reasoning": "The recruiter asked for prior projects, so we stay in discussion and leverage the ready shortlist."
    },
    "name": "Move into discussion after screening",
    "inputs": {
      "user_query": "Let's discuss the shortlisted candidates and explain why do you think they are the right fit for the role.",
      "last_phase": "screening",
      "previous_plan": "",
      "query_control": {
        "phase_sequence": [
          "screening"
        ],
        "last_completed_phase": "screening",
        "jd_complete": true,
        "allow_jd_incomplete": true,
        "update_jd": false,
        "screen_again": false,
        "new_job_search": false,
        "candidates_ready": true
      },
      "state": {
        "job_description": null,
        "candidate_insights": [],
        "last_completed_phase": "screening",
        "pending_phases": [
          "screening"
        ],
        "query_controls": {
          "phase_sequence": [
            "screening"
          ],
          "last_completed_phase": "screening",
          "jd_complete": true,
          "allow_jd_incomplete": true,
          "update_jd": false,
          "screen_again": false,
          "new_job_search": false,
          "candidates_ready": true
        }
      },
      "conversation_history": [
        {
          "role": "user",
          "phase": "job_description",
          "timestamp": "2025-11-14T14:28:01Z",
          "content": "screen candidates for this role."
        },
        {
          "role": "assistant",
          "phase": "screening",
          "timestamp": "2025-11-14T14:32:16Z",
          "content": "Shortlisted Romashchenko (0.88), Abhiram (0.73), and Prasad (0.64). Romashchenko leads with Siemens PCS 7 experience."
        },
        {
          "role": "user",
          "phase": "screening",
          "timestamp": null,
          "content": "Let's discuss the shortlisted candidates and explain why do you think they are the right fit for the role."
        }
      ]
    }
  },
  {
    "initial_output": {
      "query_controls": {
        "phase_sequence": [
          "job_description",
          "screening"
        ],
        "last_completed_phase": "screening",
        "jd_complete": true,
        "allow_jd_incomplete": true,
        "update_jd": true,
        "screen_again": false,
        "new_job_search": false,
        "candidates_ready": true
      },
      "cleaned_user_query": "i want to update the responsibilities.",
      "reasoning": "Let's refresh the JD and rerun screening to confirm the updates."
    },
    "human_feedback": "Only queue job_description when the recruiter asks to revise the brief. Drop screening unless they explicitly ask for it, but keep update_jd=true so the changes are captured.",
    "improved_output": {
      "query_controls": {
        "phase_sequence": [
          "job_description"
        ],
        "last_completed_phase": "screening",
        "jd_complete": true,
        "allow_jd_incomplete": true,
        "update_jd": true,
        "screen_again": false,
        "new_job_search": false,
        "candidates_ready": true
      },
      "cleaned_user_query": "i want to update the responsibilities.",
      "reasoning": "The recruiter only asked for JD changes, so stay on job_description with update_jd=true and leave the existing candidate state alone."
    },
    "name": "Revisit JD after screening feedback",
    "inputs": {
      "user_query": "i want to update the responsibilities.",
      "last_phase": "screening",
      "previous_plan": "",
      "query_control": {
        "phase_sequence": [
          "screening"
        ],
        "last_completed_phase": "screening",
        "jd_complete": false,
        "allow_jd_incomplete": true,
        "update_jd": false,
        "screen_again": false,
        "new_job_search": false,
        "candidates_ready": true
      },
      "state": {
        "job_description": null,
        "candidate_insights": [],
        "last_completed_phase": "screening",
        "pending_phases": [
          "screening"
        ],
        "query_controls": {
          "phase_sequence": [
            "screening"
          ],
          "last_completed_phase": "screening",
          "jd_complete": false,
          "allow_jd_incomplete": true,
          "update_jd": false,
          "screen_again": false,
          "new_job_search": false,
          "candidates_ready": true
        }
      },
      "conversation_history": [
        {
          "role": "user",
          "phase": "job_description",
          "timestamp": "2025-11-14T14:28:01Z",
          "content": "screen candidates for this role."
        },
        {
          "role": "assistant",
          "phase": "screening",
          "timestamp": "2025-11-14T14:32:16Z",
          "content": "Shortlisted Romashchenko (0.88), Abhiram (0.73), and Prasad (0.64). Romashchenko leads with Siemens PCS 7 experience."
        },
        {
          "role": "user",
          "phase": "screening",
          "timestamp": null,
          "content": "i want to update the responsibilities."
        }
      ]
    }
  },
  {
    "initial_output": {
      "query_controls": {
        "phase_sequence": [
          "screening"
        ],
        "last_completed_phase": "screening",
        "jd_complete": null,
        "allow_jd_incomplete": true,
        "update_jd": false,
        "screen_again": true,
        "new_job_search": false,
        "candidates_ready": false
      },
      "cleaned_user_query": "Please run the screening again for 10 more candidates.",
      "reasoning": "Kick off another screening pass; defaults will fill in the remaining details."
    },
    "human_feedback": "When rerunning screening you must preserve jd_complete=true (since the JD is done) and copy the requested count into top_k_hint instead of leaving it blank.",
    "improved_output": {
      "query_controls": {
        "phase_sequence": [
          "screening"
        ],
        "last_completed_phase": "screening",
        "jd_complete": true,
        "allow_jd_incomplete": true,
        "update_jd": false,
        "screen_again": true,
        "new_job_search": false,
        "candidates_ready": false
      },
      "cleaned_user_query": "Please run the screening again for 10 more candidates.",
      "reasoning": "The recruiter wants another batch of candidates, so stay on screening, keep jd_complete=true, and honor the top_k request.",
      "top_k_hint": 10
    },
    "name": "Rerun screening request",
    "inputs": {
      "user_query": "Please run the screening again for 10 more candidates.",
      "last_phase": "screening",
      "previous_plan": "",
      "query_control": {
        "phase_sequence": [
          "screening"
        ],
        "last_completed_phase": "screening",
        "jd_complete": true,
        "allow_jd_incomplete": true,
        "update_jd": false,
        "screen_again": false,
        "new_job_search": false,
        "candidates_ready": false
      },
      "state": {
        "job_description": null,
        "candidate_insights": [],
        "last_completed_phase": "screening",
        "pending_phases": [
          "screening"
        ],
        "query_controls": {
          "phase_sequence": [
            "screening"
          ],
          "last_completed_phase": "screening",
          "jd_complete": true,
          "allow_jd_incomplete": true,
          "update_jd": false,
          "screen_again": false,
          "new_job_search": false,
          "candidates_ready": false
        }
      },
      "conversation_history": [
        {
          "role": "user",
          "phase": "job_description",
          "timestamp": "2025-11-14T14:28:01Z",
          "content": "screen candidates for this role."
        },
        {
          "role": "assistant",
          "phase": "screening",
          "timestamp": "2025-11-14T14:32:16Z",
          "content": "Shortlisted Romashchenko (0.88), Abhiram (0.73), and Prasad (0.64). Romashchenko leads with Siemens PCS 7 experience."
        },
        {
          "role": "user",
          "phase": "screening",
          "timestamp": null,
          "content": "Please run the screening again for 10 more candidates."
        }
      ]
    }
  },
  {
    "initial_output": {
      "query_controls": {
        "phase_sequence": [
          "job_description",
          "screening"
        ],
        "last_completed_phase": "discussion",
        "jd_complete": true,
        "allow_jd_incomplete": true,
        "update_jd": true,
        "screen_again": true,
        "new_job_search": false,
        "candidates_ready": true
      },
      "cleaned_user_query": "make a new fresh screening with the following changes in the jd, and screen immediately. change the number of candidates to 10, and expereince to 5 years",
      "reasoning": "Update the JD and then run screening; defaults can handle the rest."
    },
    "human_feedback": "When the recruiter specifies a candidate count, populate top_k_hint with that number so the screening crew knows how many profiles to return.",
    "improved_output": {
      "query_controls": {
        "phase_sequence": [
          "job_description",
          "screening"
        ],
        "last_completed_phase": "discussion",
        "jd_complete": true,
        "allow_jd_incomplete": true,
        "update_jd": true,
        "screen_again": true,
        "new_job_search": false,
        "candidates_ready": true
      },
      "cleaned_user_query": "make a new fresh screening with the following changes in the jd, and screen immediately. change the number of candidates to 10, and expereince to 5 years",
      "reasoning": "The recruiter wants to tweak the JD and immediately screen ten candidates, so include both phases, keep the existing state, and set top_k_hint accordingly.",
      "top_k_hint": 10
    },
    "name": "All controls toggled on",
    "inputs": {
      "user_query": "make a new fresh screening with the following changes in the jd, and screen immediately. change the number of candidates to 10, and expereince to 5 years",
      "last_phase": "discussion",
      "previous_plan": "",
      "query_control": {
        "phase_sequence": [
          "discussion"
        ],
        "last_completed_phase": "discussion",
        "jd_complete": true,
        "allow_jd_incomplete": true,
        "update_jd": false,
        "screen_again": false,
        "new_job_search": false,
        "candidates_ready": true
      },
      "state": {
        "job_description": null,
        "candidate_insights": [],
        "last_completed_phase": "discussion",
        "pending_phases": [
          "discussion"
        ],
        "query_controls": {
          "phase_sequence": [
            "discussion"
          ],
          "last_completed_phase": "discussion",
          "jd_complete": true,
          "allow_jd_incomplete": true,
          "update_jd": false,
          "screen_again": false,
          "new_job_search": false,
          "candidates_ready": true
        }
      },
      "conversation_history": [
        {
          "role": "user",
          "phase": "job_description",
          "timestamp": "2025-11-14T14:28:01Z",
          "content": "screen candidates for this role."
        },
        {
          "role": "assistant",
          "phase": "screening",
          "timestamp": "2025-11-14T14:32:16Z",
          "content": "Shortlisted Romashchenko (0.88), Abhiram (0.73), and Prasad (0.64). Romashchenko leads with Siemens PCS 7 experience."
        },
        {
          "role": "user",
          "phase": "screening",
          "timestamp": "2025-11-14T14:58:22Z",
          "content": "explain why romashchenko is a great fit for the role."
        },
        {
          "role": "assistant",
          "phase": "discussion",
          "timestamp": "2025-11-14T14:58:22Z",
          "content": "Romashchenko can lead PCS 7 upgrades and mentor the controls team across plants."
        },
        {
          "role": "user",
          "phase": "discussion",
          "timestamp": null,
          "content": "make a new fresh screening with the following changes in the jd, and screen immediately. change the number of candidates to 10, and expereince to 5 years"
        }
      ]
    }
  },
  {
    "initial_output": {
      "query_controls": {
        "phase_sequence": [
          "job_description",
          "screening"
        ],
        "last_completed_phase": "job_description",
        "jd_complete": false,
        "allow_jd_incomplete": false,
        "update_jd": true,
        "screen_again": false,
        "new_job_search": false,
        "candidates_ready": false
      },
      "cleaned_user_query": "I know the profile isn't buttoned up yet, but please start pulling a few candidate resumes anyway.",
      "reasoning": "Capture the JD updates and start screening straight away."
    },
    "human_feedback": "The recruiter knows the JD is still incomplete but wants screening anyway. Route only to screening, set allow_jd_incomplete=true, and skip job_description so the crew delivers candidates immediately.",
    "improved_output": {
      "query_controls": {
        "phase_sequence": [
          "screening"
        ],
        "last_completed_phase": "job_description",
        "jd_complete": false,
        "allow_jd_incomplete": true,
        "update_jd": true,
        "screen_again": false,
        "new_job_search": false,
        "candidates_ready": false
      },
      "cleaned_user_query": "I know the profile isn't buttoned up yet, but please start pulling a few candidate resumes anyway.",
      "reasoning": "They accept the incomplete JD and want candidates now, so move directly to screening with allow_jd_incomplete=true while keeping update_jd flagged for any late additions."
    },
    "name": "Start sourcing while JD still in flux",
    "inputs": {
      "user_query": "I know the job description isn't complete yet, but please start pulling a few candidate resumes anyway.",
      "last_phase": "job_description",
      "previous_plan": "job_description",
      "query_control": {
        "phase_sequence": [
          "job_description"
        ],
        "last_completed_phase": "job_description",
        "jd_complete": false,
        "allow_jd_incomplete": false,
        "update_jd": true,
        "screen_again": false,
        "new_job_search": false,
        "candidates_ready": false
      },
      "state": {
        "job_description": null,
        "candidate_insights": [],
        "last_completed_phase": "job_description",
        "pending_phases": [
          "job_description"
        ],
        "query_controls": {
          "phase_sequence": [
            "job_description"
          ],
          "last_completed_phase": "job_description",
          "jd_complete": false,
          "allow_jd_incomplete": false,
          "update_jd": true,
          "screen_again": false,
          "new_job_search": false,
          "candidates_ready": false
        }
      },
      "conversation_history": [
        {
          "role": "user",
          "phase": "job_description",
          "timestamp": "2025-11-14T14:41:14Z",
          "content": "Here are all the details for the job."
        },
        {
          "role": "assistant",
          "phase": "job_description",
          "timestamp": "2025-11-14T14:20:05Z",
          "content": "We still need certification preferences and travel requirements to complete the jobs description. this will allow me to get appropriate candidates matching with your requirements."
        },
        {
          "role": "user",
          "phase": "job_description",
          "timestamp": null,
          "content": "I know the job description isn't complete yet, but please start pulling a few candidate resumes anyway."
        }
      ]
    }
  }
]
